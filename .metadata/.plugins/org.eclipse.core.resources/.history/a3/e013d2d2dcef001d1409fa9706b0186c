package ejercicio13;

import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.List;
import java.util.Scanner;

import org.json.JSONObject;

import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;

public class Programa {
	
	public static void main(String[] args) {

		try {
			URL endpoint = new URL("https://pokeapi.co/api/v2/pokemon/charizard");
			HttpURLConnection con = (HttpURLConnection) endpoint.openConnection();
			con.connect(); 
			int tiempoDeRespuesta = con.getResponseCode();
			if (tiempoDeRespuesta != 200)
			{
				throw new RuntimeException("HttpResponseCode" + tiempoDeRespuesta);			
			}
			else
			{
				InputStreamReader input = new InputStreamReader(con.getInputStream());
				
//				String informacionSinCorchetes = informacion.toString().replace("[", "").replace("]", "");
				

				Gson datag = new Gson();
				JsonElement datae = datag.fromJson(input, JsonElement.class);
				JsonObject data = datae.getAsJsonObject();
//				urlGatito = new URL(data.getString("url"));
				String nombre = data.get("species").getAsJsonObject().get("name").getAsString();
				List<JsonElement> tipoList = data.get("types").getAsJsonArray().asList();
				String tipos = tipoList.get(0).getAsJsonObject().get("type").getAsJsonObject().get("name").getAsString();
				for(int i=1;i<tipoList.size();i++) {
					tipos+= " - "+tipoList.get(i).getAsJsonObject().get("type").getAsJsonObject().get("name").getAsString();
				}
				String peso = data.get("weight").getAsString();
				
				System.out.println(nombre);
				System.out.println(peso);
				System.out.println(tipos);
			}
		} catch (Exception e) {
			// TODO: handle exception
		}
	}
}
